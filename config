
# Copyright (C) Ngwsx


ngx_addon_name=ngx_squ_module


#NGX_SQU_DLL=YES
NGX_SQU_DLL=NO


NGX_SQU_AUTORUN=YES

NGX_SQU_AXIS2C=YES
NGX_SQU_AXIS2C_WS=YES
NGX_SQU_AXIS2C_XML=YES

NGX_SQU_BTT=NO

NGX_SQU_DAHUA=NO

NGX_SQU_DBD=YES
NGX_SQU_DBD_LIBDRIZZLE=YES
NGX_SQU_DBD_SQLITE3=YES

NGX_SQU_FILE=YES
NGX_SQU_LOGGER=YES
NGX_SQU_SMTP=YES
NGX_SQU_SOCKET=YES
NGX_SQU_UTILS=YES

NGX_SQU_HTTP=YES
NGX_SQU_HTTP_LOG=YES
NGX_SQU_HTTP_REQUEST=YES
NGX_SQU_HTTP_RESPONSE=YES
NGX_SQU_HTTP_SESSION=YES
NGX_SQU_HTTP_VARIABLE=YES
NGX_SQU_HTTP_BTT=NO

NGX_SQU_TCP=YES
NGX_SQU_TCP_REQUEST=YES
NGX_SQU_TCP_RESPONSE=YES

NGX_SQU_UDP=YES
NGX_SQU_UDP_REQUEST=YES
NGX_SQU_UDP_BTT=NO

NGX_SQU_UDT=NO
NGX_SQU_UDT_REQUEST=YES
NGX_SQU_UDT_RESPONSE=YES
NGX_SQU_UDT_BTT=NO


if [ "$NGX_PLATFORM" != win32 ]; then
    CORE_LINK="$CORE_LINK -ldl"
fi


. $ngx_addon_dir/auto/lib/squirrel/conf
CORE_LIBS="$CORE_LIBS $SQUIRREL_LIBS"
CORE_INCS="$CORE_INCS $SQUIRREL_INCS"


. $ngx_addon_dir/auto/sources


EVENT_MODULES="$EVENT_MODULES $NGX_SQU_MODULE"
CORE_INCS="$CORE_INCS $NGX_SQU_INCS"
NGX_ADDON_DEPS="$NGX_ADDON_DEPS $NGX_SQU_DEPS"
NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_SRCS"

if [ $NGX_SQU_HTTP = YES ]; then
    HTTP_MODULES="$HTTP_MODULES $NGX_SQU_HTTP_MODULE"
    HTTP_INCS="$HTTP_INCS $NGX_SQU_HTTP_INCS"
    NGX_ADDON_DEPS="$NGX_ADDON_DEPS $NGX_SQU_HTTP_DEPS"
    NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_HTTP_SRCS"
fi

if [ $NGX_SQU_HTTP_LOG = YES ]; then
    HTTP_MODULES="$HTTP_MODULES $NGX_SQU_HTTP_LOG_MODULE"
    HTTP_INCS="$HTTP_INCS $NGX_SQU_HTTP_LOG_INCS"
    NGX_ADDON_DEPS="$NGX_ADDON_DEPS $NGX_SQU_HTTP_LOG_DEPS"
    NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_HTTP_LOG_SRCS"
fi

if [ $NGX_SQU_TCP = YES ]; then
    EVENT_MODULES="$EVENT_MODULES $NGX_SQU_TCP_MODULES"
    CORE_INCS="$CORE_INCS $NGX_SQU_TCP_INCS"
    NGX_ADDON_DEPS="$NGX_ADDON_DEPS $NGX_SQU_TCP_DEPS"
    NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_TCP_SRCS"
fi

if [ $NGX_SQU_UDP = YES ]; then
    EVENT_MODULES="$EVENT_MODULES $NGX_SQU_UDP_MODULES"
    CORE_INCS="$CORE_INCS $NGX_SQU_UDP_INCS"
    NGX_ADDON_DEPS="$NGX_ADDON_DEPS $NGX_SQU_UDP_DEPS"
    NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_UDP_SRCS"
fi

if [ $NGX_SQU_UDT = YES ]; then
    . $ngx_addon_dir/../ngx_udt_module/auto/lib/udt/conf
    CORE_LIBS="$CORE_LIBS $UDT_LIBS"
    CORE_INCS="$CORE_INCS $UDT_INCS"

    EVENT_MODULES="$EVENT_MODULES $NGX_SQU_UDT_MODULES"
    CORE_INCS="$CORE_INCS $NGX_SQU_UDT_INCS"
    NGX_ADDON_DEPS="$NGX_ADDON_DEPS $NGX_SQU_UDT_DEPS"
    NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_UDT_SRCS"

    have=NGX_UDT . auto/have
fi


if [ $NGX_SQU_AXIS2C = YES ]; then
    . $ngx_addon_dir/../ngx_lua_module/auto/lib/axis2c/conf
    CORE_INCS="$CORE_INCS $AXIS2C_INCS"
fi

if [ $NGX_SQU_BTT = YES ]; then
    EVENT_MODULES="$EVENT_MODULES $NGX_SQU_BTT_MODULE"
    NGX_ADDON_DEPS="$NGX_ADDON_DEPS $NGX_SQU_BTT_DEPS"
    NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_BTT_SRCS"
fi

if [ $NGX_SQU_DBD = YES ]; then
    CORE_INCS="$CORE_INCS $NGX_SQU_DBD_INCS"
    NGX_ADDON_DEPS="$NGX_ADDON_DEPS $NGX_SQU_DBD_DEPS"
    NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_DBD_SRCS"

    have=NGX_SQU_DBD . auto/have

    if [ $NGX_SQU_DBD_LIBDRIZZLE = YES ]; then
        . $ngx_addon_dir/../ngx_dbd_module/auto/lib/libdrizzle/conf
        CORE_INCS="$CORE_INCS $LIBDRIZZLE_INCS"
        have=NGX_SQU_DBD_LIBDRIZZLE . auto/have
    else
        have=NGX_SQU_DBD_LIBDRIZZLE . auto/nohave
    fi

    if [ $NGX_SQU_DBD_SQLITE3 = YES ]; then
        . $ngx_addon_dir/../ngx_dbd_module/auto/lib/sqlite3/conf
        CORE_INCS="$CORE_INCS $SQLITE3_INCS"
        have=NGX_SQU_DBD_SQLITE3 . auto/have
    else
        have=NGX_SQU_DBD_SQLITE3 . auto/nohave
    fi
else
    have=NGX_SQU_DBD . auto/nohave
fi

if [ $NGX_SQU_UTILS = YES ]; then
    . $ngx_addon_dir/../ngx_lua_module/auto/lib/sha1/conf
fi


if [ $NGX_SQU_DLL = NO ]; then

    if [ $NGX_SQU_AUTORUN = YES ]; then
        NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_AUTORUN_SRCS"
    fi

    if [ $NGX_SQU_AXIS2C = YES ]; then
        CORE_LIBS="$CORE_LIBS $AXIS2C_LIBS"
        NGX_ADDON_DEPS="$NGX_ADDON_DEPS $NGX_SQU_AXIS2C_DEPS"
        NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_AXIS2C_SRCS"

        if [ $NGX_SQU_AXIS2C_WS = YES ]; then
            NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_AXIS2C_WS_SRCS"
        fi

        if [ $NGX_SQU_AXIS2C_XML = YES ]; then
            NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_AXIS2C_XML_SRCS"
        fi
    fi

    if [ $NGX_SQU_DAHUA = YES ]; then
        NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_DAHUA_SRCS"
    fi

    if [ $NGX_SQU_DBD = YES ]; then
        NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_DBD_MODULE_SRCS"

        if [ $NGX_SQU_DBD_LIBDRIZZLE = YES ]; then
            CORE_LIBS="$CORE_LIBS $LIBDRIZZLE_LIBS"
            NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_DBD_LIBDRIZZLE_SRCS"
        fi

        if [ $NGX_SQU_DBD_SQLITE3 = YES ]; then
            CORE_LIBS="$CORE_LIBS $SQLITE3_LIBS"
            NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_DBD_SQLITE3_SRCS"
        fi
    fi

    if [ $NGX_SQU_FILE = YES ]; then
        NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_FILE_SRCS"
    fi

    if [ $NGX_SQU_LOGGER = YES ]; then
        NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_LOGGER_SRCS"
    fi

    if [ $NGX_SQU_SMTP = YES ]; then
        NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_SMTP_SRCS"
    fi

    if [ $NGX_SQU_SOCKET = YES ]; then
        NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_SOCKET_SRCS"
    fi

    if [ $NGX_SQU_UTILS = YES ]; then
        NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_UTILS_SRCS"
    fi

    if [ $NGX_SQU_HTTP = YES -o $NGX_SQU_HTTP_LOG = YES ]; then
        if [ $NGX_SQU_HTTP_REQUEST = YES ]; then
            NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_HTTP_REQUEST_SRCS"
        fi

        if [ $NGX_SQU_HTTP_RESPONSE = YES ]; then
            NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_HTTP_RESPONSE_SRCS"
        fi

        if [ $NGX_SQU_HTTP_SESSION = YES ]; then
            NGX_ADDON_DEPS="$NGX_ADDON_DEPS $NGX_SQU_HTTP_SESSION_DEPS"
            NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_HTTP_SESSION_SRCS"
        fi

        if [ $NGX_SQU_HTTP_VARIABLE = YES ]; then
            NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_HTTP_VARIABLE_SRCS"
        fi

        if [ $NGX_SQU_BTT = YES -a $NGX_SQU_HTTP_BTT = YES ]; then
            NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_HTTP_BTT_SRCS"
        fi
    fi

    if [ $NGX_SQU_TCP = YES ]; then
        if [ $NGX_SQU_TCP_REQUEST = YES ]; then
            NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_TCP_REQUEST_SRCS"
        fi

        if [ $NGX_SQU_TCP_RESPONSE = YES ]; then
            NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_TCP_RESPONSE_SRCS"
        fi
    fi

    if [ $NGX_SQU_UDP = YES ]; then
        if [ $NGX_SQU_UDP_REQUEST = YES ]; then
            NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_UDP_REQUEST_SRCS"
        fi

        if [ $NGX_SQU_BTT = YES -a $NGX_SQU_UDP_BTT = YES ]; then
            NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_UDP_BTT_SRCS"
        fi
    fi

    if [ $NGX_SQU_UDT = YES ]; then
        if [ $NGX_SQU_UDT_REQUEST = YES ]; then
            NGX_ADDON_SRCS="$NGX_ADDON-SRCS $NGX_SQU_UDT_REQUEST_SRCS"
        fi

        if [ $NGX_SQU_UDT_RESPONSE = YES ]; then
            NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_UDT_RESPONSE_SRCS"
        fi

        if [ $NGX_SQU_BTT = YES -a $NGX_SQU_UDT_BTT = YES ]; then
            NGX_ADDON_SRCS="$NGX_ADDON_SRCS $NGX_SQU_UDT_BTT_SRCS"
        fi
    fi

    have=NGX_SQU_DLL . auto/nohave

else

    if [ "$NGX_PLATFORM" != win32 ]; then
        CORE_LINK="$CORE_LINK -rdynamic"
    else
        NGX_SQU_DEF="$ngx_addon_dir/src/core/ngx_squ.def"
        CORE_LINK="$CORE_LINK -def:$NGX_SQU_DEF"
        CORE_DEPS="$CORE_DEPS $NGX_SQU_DEF"
    fi

    have=NGX_SQU_DLL . auto/have
fi


USE_MD5=YES
USE_SHA1=YES
